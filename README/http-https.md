# HTTP と HTTPS の違い

`http` と `https` の違いは、通信が`SSL`によって暗号化されているかどうか。
`http` は暗号化されておらず、`https` は暗号化されている。

`SSL`（Secure Sockets Layer）は、SSLサーバ証明書 を使い暗号化する仕組みを指します。
SSLサーバ証明書 には、ウェブサイトの所有者の情報や、暗号化通信に必要な鍵、発行者の署名データが含まれています。

SSLサーバ証明書に,含まれる2つの鍵(共通鍵暗号方式・公開鍵暗号方式)によって、ブラウザ と サーバ間で送受信される個人情報や決済情報などの通信データを暗号化することができます。 暗号化されたデータは、SSLサーバ証明書を導入したサーバで保持する秘密鍵のみでしか解読することができず、第三者からの盗聴を防ぎます。

## HTTP (HyperText Transfer Protocol)

-   通信内容が**暗号化されていません**。
-   そのため、ネットワーク経路上で第三者によってデータ（個人情報、ログイン情報、決済情報など）を盗聴されたり、改ざんされたりするリスクがあります。

## HTTPS (HyperText Transfer Protocol Secure)

-   通信内容が **SSL/TLS によって暗号化**されています。
-   URLが `https://` で始まり、ブラウザのアドレスバーに鍵マークが表示されることで、セキュアな接続であることが示されます。
-   HTTPSを利用することで、主に以下の3つのセキュリティ効果が得られます。
    1.  **盗聴防止（暗号化）**: 通信データが暗号化されるため、第三者が傍受しても内容を解読することが困難になります。
    2.  **改ざん防止**: 送受信されるデータが途中で変更されていないことを保証します。
    3.  **なりすまし防止（サイト運営者の実在証明）**: 通信先のサーバーが、正当な運営者によって運営されている本物のサーバーであることを証明します。

## SSL/TLS とは

SSL (Secure Sockets Layer) およびその後継である TLS (Transport Layer Security) は、インターネット上でデータを暗号化して送受信するためのプロトコル（規約）です。現在では主にTLSが利用されていますが、一般的に「SSL」または「SSL/TLS」と総称されることが多いです。

このSSL/TLSによる暗号化通信を実現するために不可欠なのが「**SSLサーバー証明書**」です。

### SSLサーバー証明書

SSLサーバー証明書は、ウェブサイトの信頼性とセキュリティを保証するために、認証局（CA: Certificate Authority、例: GMOグローバルサイン様）によって発行される電子証明書です。この証明書には、主に以下の情報が含まれています。

-   **ウェブサイト運営組織の情報**: ウェブサイトのドメイン名、運営組織の実在情報（証明書の種類による）。
-   **公開鍵**: 暗号化通信を開始するために必要な鍵。
-   **発行者の署名データ (デジタル署名)**: この証明書が信頼できる認証局によって発行されたことを証明します。
-   **有効期限**: 証明書の有効期間。

SSLサーバー証明書には、検証レベルに応じていくつかの種類があります（例: ドメイン認証（DV）、組織認証（OV）、EV認証（Extended Validation））。検証レベルが高いほど、サイト運営組織の信頼性も高く示されます。

### SSL/TLS における暗号化の仕組み (共通鍵暗号方式と公開鍵暗号方式の連携)

SSL/TLS通信では、「共通鍵暗号方式」と「公開鍵暗号方式」という2種類の暗号技術が巧みに組み合わせて利用されます。

1.  **SSL/TLSハンドシェイク (通信開始前の準備)**:
    -   **公開鍵暗号方式の利用**: ブラウザ（クライアント）とウェブサーバーが通信を開始する際、まずSSL/TLSハンドシェイクと呼ばれる手順が行われます。この段階で、ウェブサーバーは自身の「SSLサーバー証明書」をブラウザに提示します。ブラウザはこの証明書を検証し、証明書に含まれる「**公開鍵**」を使って、実際のデータ暗号化に使用する「**共通鍵（セッションキーとも呼ばれる）**」の元となる情報を暗号化してサーバーに送信します。
    -   サーバーは、自身だけが持つ「**秘密鍵**」を使って、ブラウザから送られてきた暗号化情報を解読し、「共通鍵」を復元します。
    -   この公開鍵暗号方式により、安全に「共通鍵」をクライアントとサーバー間で共有することができます。

2.  **実際のデータ通信 (共通鍵暗号方式)**:
    -   上記ハンドシェイクで共有された「**共通鍵**」を使用して、ブラウザとサーバー間で送受信される実際のデータ（個人情報や決済情報など）が暗号化・復号されます。
    -   共通鍵暗号方式は、公開鍵暗号方式に比べて処理速度が速いため、大量のデータ通信に適しています。

このようにして、SSL/TLSはまず公開鍵暗号方式で安全に共通鍵を交換し、その後はその共通鍵を使って実際のデータを高速に暗号化することで、通信の安全性と効率性を両立させています。暗号化されたデータは、ウェブサーバーの秘密鍵がなければ解読できないため、第三者によるデータの盗聴や改ざんを効果的に防ぐことができます。

HTTPSとSSL/TLSの導入は、ユーザーに安全なウェブサイト利用環境を提供し、サイト運営者の信頼性を高める上で非常に重要です。



# オレオレ証明書（自己署名証明書）とは
SSL認証について調査していたところ、オレオレ証明書という単語を見つけたので調査した。
「オレオレ証明書」または「自己署名証明書」とは、**信頼された第三者機関である認証局（CA: Certificate Authority）によって発行・署名されるのではなく、ウェブサイトの運営者自身が発行し、自分自身の秘密鍵で署名したSSLサーバー証明書**のこと。

通常のSSLサーバー証明書は、認証局がウェブサイトのドメイン所有権や運営組織の実在性を検証した上で発行するため、ブラウザや利用者はそのウェブサイトを信頼し、安全に通信できると判断する。

しかし、オレオレ証明書はこのような第三者による検証プロセスを経ていない。

## オレオレ証明書の主な特徴

オレオレ証明書には以下のような特徴が挙げられます。

* **第三者認証の欠如**: 信頼された認証局による認証が行われていないため、その証明書が本当に正当なものであるかどうかの客観的な保証がありません。
* **ブラウザからの警告**: 上記の理由から、主要なウェブブラウザ（Chrome, Firefox, Safari, Edgeなど）はオレオレ証明書を信頼しません。そのため、オレオレ証明書を使用しているウェブサイトにHTTPSでアクセスしようとすると、「この接続は安全ではありません」「セキュリティ証明書に問題があります」といった警告メッセージが表示されることが一般的です。
* **有効期限の任意設定**: 通常の認証局が発行する証明書には厳格な有効期限ポリシーがありますが、オレオレ証明書は発行者が有効期限を任意で設定できます（原則1年としつつも任意設定可能と解説されている場合があります）。

## オレオレ証明書のメリット

オレオレ証明書のメリットとして一般的に挙げられるのは、以下の点です（ただし、これらは限定的な状況下での利点です）。

* **コスト**: 無料で作成できます。正規の証明書（特に企業認証型やEV認証型）は費用がかかります。
* **発行の迅速性**: 認証局の審査プロセスがないため、すぐに発行して利用を開始できます。

## オレオレ証明書のデメリットとリスク

オレオレ証明書には、以下のようなデメリットやセキュリティ上の懸念点があります。

* **サイバー攻撃を受ける危険性**: 証明書の信頼性が低いため、中間者攻撃などの標的にされやすくなる可能性があります。なりすましサイトがオレオレ証明書を使っていても、利用者が警告に慣れてしまうと見抜くことが難しくなります。
* **ブラウザやサイト利用者からの信頼性が低い**: 前述の通り、ブラウザから警告が表示されるため、訪問者に不安を与え、サイトの信頼性を著しく損ないます。結果として、サイトからの離脱につながる可能性が高いです。
* **認証局のサポートを受けられない**: 正規の証明書であれば受けられる認証局からの技術サポートや、失効処理などのサービスがありません。

## オレオレ証明書の主な用途

オレオレ証明書の用途は以下のように限定的です。

* **内部ネットワークでの利用**: 社内LANなど、外部に公開されない閉じたネットワーク環境内のサーバーで使用する場合。
* **テスト環境での利用**: 開発中のウェブアプリケーションで、HTTPS通信の機能自体をテストする目的で使用する場合。

**重要な注意点として、インターネット上で広く一般に公開するウェブサイトでの使用は推奨されていません。**

## オレオレ証明書に関する注意点

有効期限に関する注意点が挙げられます。

* **有効期限切れと更新**: オレオレ証明書も有効期限があり、切れると通信ができなくなります。期限が切れる前に証明書を更新し、サーバーに再展開する必要があります。
* **有効期限の設定**: 有効期限を長く設定しすぎると、証明書の存在や更新を忘れやすくなるという問題があります。利用状況に合わせて適切な有効期限を設定することが重要です。

